environment:
  nodejs_version: "10.0"

version: '{branch}-{build}'

init:
  - cmd: git config --global core.autocrlf true

# Beware that using a batch file to contain the install script (below)
# does not work.  The `npm install` commands cause the script to
# terminate early and abort any further execution.

install:
  - ps: Install-Product node $env:nodejs_version
  - git submodule update --init --recursive
  - nuget restore Agiil.sln
  - cd Agiil.Web
  - npm install
  - cd ..
  - cd Agiil.Web.Client
  - npm install
  - cd ..

configuration: AppVeyorCI

build:
  project: Agiil.sln
  verbosity: normal

test:
  assemblies:
    except:
      - '**\Agiil.Tests.Common.dll'
      - '**\Agiil.BDD.dll'
      - '**\Ploeh.AutoFixture.NUnit3.dll'
      - '**\Agiil.Tests.BDD.dll'
    