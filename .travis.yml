language: csharp
solution: Agiil.sln

before_install:
  - sudo add-apt-repository -y ppa:ubuntu-toolchain-r/test
  - sudo apt-get update
  - sudo apt-get -y install libstdc++6-4.7-dev

install:
  - mkdir -p ~/.mono
  - cp Tools/mono.config ~/.mono/config
  - nuget restore Agiil.sln
  - nuget install NUnit.ConsoleRunner -Version 3.6.1 -OutputDirectory testrunner

script:
  - xbuild /p:Configuration=Debug Agiil.sln
  - MONO_LOG_LEVEL=debug mono "./testrunner/NUnit.ConsoleRunner.3.6.1/tools/nunit3-console.exe" $(find ./Tests/ -type f -path "*/bin/Debug/*" -name "Agiil.Tests*.dll" \! -name "Agiil.Tests.Common.dll")