<html lang="en" metal:use-macro="Views/Shared/StandardPage/macros/page">
<head>
<title metal:fill-slot="title_element">Ticket detail</title>
<base href="../../" />
<link href="https://fonts.googleapis.com/css?family=Lato:400,400i,700,700i|Source+Code+Pro:400,700" rel="stylesheet" />
<style>
@import url('Content/Css/Reset.css');
@import url('Content/Css/StandardPage.css');
</style>
</head>
<body>
<section metal:fill-slot="page_content"
         class="page_content ticket_detail"
         tal:define="ticket here/Ticket">
  <header>
    <h1 tal:content="ticket/Title">Ticket title</h1>
    <p>
      Ticket <strong tal:content="string:#${ticket/Reference}">AB123</strong>.
    </p>
  </header>
  <section class="details">
    <p>
      Created by <strong tal:content="ticket/Creator">username</strong>
      on <strong tal:content="ticket/CreationTimestamp">2001-01-01 19:21:22</strong>.
    </p>
    <form class="open_close_ticket"
          action="OpenCloseTicket/Close/0"
          method="POST"
          tal:define="isClosed ticket/Closed;
                      openCloseAction csharp:isClosed? &quot;Reopen&quot; : &quot;Close&quot;;
                      openCloseUrl string:OpenCloseTicket/${openCloseAction}/${ticket/Id}"
          tal:attributes="action openCloseUrl">
      <fieldset>
        <div class="form_element button" tal:condition="not:isClosed">
          <p>This ticket is open</p>
          <button>Close</button>
        </div>
        <div class="form_element button" tal:condition="isClosed">
          <p>This ticket is closed</p>
          <button>Re-open</button>
        </div>
      </fieldset>
    </form>
  </section>
  <section class="description">
    <h2>Description</h2>
    <div tal:content="ticket/Description" class="description_content">
      Ticket description here.
    </div>
  </section>
  <a href="Ticket/Edit/0"
     tal:define="editUrl string:Ticket/Edit/${ticket/Id}"
     tal:attributes="href editUrl">Edit this ticket</a>
  <section class="comments">
    <header>
      <h2>Comments</h2>
    </header>
    <ol metal:use-macro="Views/Shared/Controls/Comments/macros/comment_list"
        class="comment_list">
      <li>
        <header>
          <p>
            Written by <strong>Username</strong> on
            <strong>2001-01-01 19:21:22</strong>.
          </p>
        </header>
        <div class="comment_content">Here is some comment text.
          It runs across two lines.</div>
      </li>
      <li>
        <header>
          <p>
            Written by <strong>Username</strong> on
            <strong>2001-01-01 19:21:22</strong>.
          </p>
        </header>
        <div class="comment_content">Here is some comment text.
          It runs across two lines.</div>
      </li>
    </ol>
    <h3>Add a comment</h3>
    <div metal:use-macro="Views/Shared/Controls/Comments/macros/add_a_comment">
      Add a comment control
    </div>
  </section>
</section>
</body>
</html>